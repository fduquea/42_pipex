First command input is the infile
last command is from pipe to outfile
middle commands are from pipe to pipe

First command input is infile instead of 0/standard input and output is pipe instead of 1/standard output
First command input is pipe instead of 0/standard input and output is pipe instead of 1/standard output
Middle commands input is pipe and output is also pipe

I want a child process for every command.

I first open the pipe.
The first and last child processes needs to be different.
Then I fork, inside the child process I dup the curresponding outputs and inputs.
I exec inside the child process.

The number of commands are 'argc - 3'
The number of middle commands are 'argc - 5'

Test infile and outfile access